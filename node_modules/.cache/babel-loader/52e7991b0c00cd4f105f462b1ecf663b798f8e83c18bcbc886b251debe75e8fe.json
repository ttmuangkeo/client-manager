{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\";\nimport Organization from \"../Layout/Organization.vue\";\nimport BaseHeader from \"../../components/BaseHeader.vue\";\nexport default {\n  data: function data() {\n    return {\n      data: \"\",\n      TOKEN: \"\",\n      authToken: \"\",\n      orgId: \"\",\n      orgGuid: \"\",\n      keyName: \"\",\n      payload: \"\"\n    };\n  },\n  components: {\n    Organization: Organization,\n    BaseHeader: BaseHeader\n  },\n  methods: {\n    getUsers: function getUsers() {\n      var _this = this;\n      var BASEURL = \"https://directory-dev.loanpal.services/\";\n      var ENDPOINT = \"Users/me?tenant=sandbox01\";\n      axios.create({\n        baseURL: BASEURL,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + this.TOKEN\n        }\n      }).get(ENDPOINT).then(function (res) {\n        if (res.status === 200) {\n          var self = _this;\n          self.$store.commit(\"updateUser\", res.data);\n          _this.authorization(res.data.contexts[0].guid);\n        }\n      }).catch(function (err) {\n        if (err.response.status === 401) {\n          alert(err.response.status + \" Bad Bearer Token\");\n        }\n      });\n    },\n    authorization: function authorization(guid) {\n      var _this2 = this;\n      var BASEURL = \"https://directory-dev.loanpal.services/\";\n      var ENDPOINT = \"Authorization\";\n      axios.create({\n        baseURL: BASEURL,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + this.TOKEN\n        }\n      }).post(ENDPOINT, {\n        contextId: guid\n      }).then(function (res) {\n        console.log(res);\n        _this2.authToken = res.data.token;\n        _this2.getOrg(res.data.token);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    getOrg: function getOrg(token) {\n      var _this3 = this;\n      var BASEURL = \"https://directory-dev.loanpal.services/\";\n      var ENDPOINT = \"Organizations/external/\" + this.orgId;\n      axios.create({\n        baseURL: BASEURL,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token\n        }\n      }).get(ENDPOINT).then(function (res) {\n        var self = _this3;\n        self.$store.commit(\"updateOrganization\", res.data.payload);\n        _this3.orgGuid = res.data.payload.guid;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    createApiKey: function createApiKey() {\n      var _this4 = this;\n      var BASEURL = \"https://directory-dev.loanpal.services/\";\n      var ENDPOINT = \"Users/system/\";\n      var self = this;\n      axios.create({\n        baseURL: BASEURL,\n        headers: {\n          \"Content-Type\": \"application/json-patch+json\",\n          Authorization: \"Bearer \" + this.TOKEN\n        }\n      }).post(ENDPOINT, {\n        name: self.$store.getters.organzation.name + ' ' + self.$store.getters.organzation.tenant.code + ' ' + this.keyName,\n        organizationId: this.orgGuid,\n        roleId: \"d6508641-2b1e-4654-8133-bc7b01d91d36\",\n        publicKey: \"\"\n      }).then(function (res) {\n        console.log(res);\n        _this4.payload = res.data.payload.apiKeys[0];\n      }).catch(function (err) {\n        console.log(err.status);\n      });\n    },\n    getOrgUser: function getOrgUser() {\n      var _this5 = this;\n      var BASEURL = \"https://directory-dev.loanpal.services/\";\n      var ENDPOINT = \"Organizations/\" + this.orgGuid + \"/users\";\n      axios.create({\n        baseURL: BASEURL,\n        headers: {\n          \"Content-Type\": \"application/json-patch+json\",\n          Authorization: \"Bearer \" + this.TOKEN\n        }\n      }).get(ENDPOINT).then(function (res) {\n        console.log(res);\n        var self = _this5;\n        self.$store.commit(\"updateOrganizationUsers\", res.data.payload);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    deleteKeys: function deleteKeys(name, contextId) {\n      // const BASEURL = \"https://directory-dev.loanpal.services/\";\n      // const ENDPOINT = 'Users/contexts' + this.orgGuid\n      // if (confirm(\"Deleting \" + name + \"are you sure?\")) {\n      //   console.log(contextId);\n      // }\n      var BASEURL = \"https://directory-dev.loanpal.services/\";\n      var ENDPOINT = 'Users/contexts/' + this.orgGuid;\n      axios.create({\n        baseURL: BASEURL,\n        headers: {\n          \"Content-Type\": \"application/json-patch+json\",\n          Authorization: \"Bearer \" + this.TOKEN\n        }\n      }).delete(ENDPOINT).then(function (res) {\n        if (confirm(\"Deleting \" + name + \"are you sure?\")) {\n          console.log(res);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","Organization","BaseHeader","data","TOKEN","authToken","orgId","orgGuid","keyName","payload","components","methods","getUsers","_this","BASEURL","ENDPOINT","create","baseURL","headers","Authorization","get","then","res","status","self","$store","commit","authorization","contexts","guid","catch","err","response","alert","_this2","post","contextId","console","log","token","getOrg","_this3","createApiKey","_this4","name","getters","organzation","tenant","code","organizationId","roleId","publicKey","apiKeys","getOrgUser","_this5","deleteKeys","delete","confirm"],"sources":["src/views/Starter/ApiKeyGenerator.vue"],"sourcesContent":["<template>\n  <div>\n    <base-header class=\"pb-6 pb-8 pt-5 pt-md-4 bg-transparent\">\n      <h1>API Key Generator</h1>\n    </base-header>\n    <b-container fluid>\n      <b-row>\n        <!-- <b-col xl=\"9\" class=\"order-xl-2 mb-5\">\n          <Organization></Organization>\n        </b-col> -->\n        <b-col xl=\"4\" class=\"order-xl-1\">\n          <template>\n            <card>\n              <b-form>\n                <div class=\"pl-lg-4\">\n                  <b-row>\n                    <b-col lg=\"12\">\n                      <base-input\n                        type=\"Text\"\n                        label=\"Organization ID\"\n                        placeholder=\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"\n                        v-model=\"orgId\"\n                        @blur=\"getOrgUser\"\n                      >\n                      </base-input>\n                      <div v-show=\"orgId\">\n                        <p v-html=\"$store.getters.organzation.name\"></p>\n                      </div>\n                    </b-col>\n                    <b-col lg=\"12\">\n                      <base-input\n                        type=\"Text\"\n                        label=\"Origin Bearer Token\"\n                        placeholder=\"Token\"\n                        v-model=\"TOKEN\"\n                        @blur=\"getUsers\"\n                      >\n                      </base-input>\n                      <p v-html=\"$store.getters.user.name\"></p>\n                      <p v-html=\"$store.getters.user.tenant\"></p>\n                    </b-col>\n                    <b-col lg=\"12\">\n                      <base-input\n                        type=\"Text\"\n                        label=\"Distributor\"\n                        placeholder=\"SOLO\"\n                        v-model=\"keyName\"\n                      >\n                      </base-input>\n                    </b-col>\n                  </b-row>\n                </div>\n                <hr class=\"my-4\" />\n                <a @click=\"createApiKey\" class=\"btn btn-success\">\n                  Create Key\n                </a>\n              </b-form>\n              <hr>\n              <pre>{{ payload }}</pre>\n            </card>\n          </template>\n        </b-col>\n        <b-col xl=\"8\" class=\"order-xl-2\">\n          <b-row lg=\"5\" v-show=\"$store.getters.organzationUsers\">\n            <template>\n              <card>\n            <b-col lg=\"12\"\n              v-for=\"(res, key) in $store.getters.organzationUsers\"\n              :key=\"key\"\n            >\n              <p>name: {{ res.name }}</p> \n              <!-- <p>OrgID: {{ res.apiKeys[0].organizationId }}</p>  -->\n              <!-- <p>ExpirationData: {{ res.apiKeys[key].expirationDate }}</p> -->\n              <button\n                type=\"button\"\n                class=\"btn btn-danger\"\n                @click=\"deleteKeys(res.name, res.contextId)\"\n              >\n                Delete\n              </button>\n              <hr>\n            </b-col>\n              </card>\n            </template>\n          </b-row>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n\n<script>\nimport axios from \"axios\";\nimport Organization from \"../Layout/Organization.vue\";\nimport BaseHeader from \"../../components/BaseHeader.vue\";\nexport default {\n  data() {\n    return {\n      data: \"\",\n      TOKEN: \"\",\n      authToken: \"\",\n      orgId: \"\",\n      orgGuid: \"\",\n      keyName: \"\",\n      payload: \"\",\n    };\n  },\n  components: {\n    Organization,\n    BaseHeader,\n  },\n  methods: {\n    getUsers() {\n      const BASEURL = \"https://directory-dev.loanpal.services/\";\n      const ENDPOINT = \"Users/me?tenant=sandbox01\";\n      axios\n        .create({\n          baseURL: BASEURL,\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + this.TOKEN,\n          },\n        })\n        .get(ENDPOINT)\n        .then((res) => {\n          if(res.status === 200) {\n            const self = this;\n            self.$store.commit(\"updateUser\", res.data);\n            this.authorization(res.data.contexts[0].guid);\n          }\n        })\n        .catch((err) => {\n            if (err.response.status === 401) {\n              alert(err.response.status + \" Bad Bearer Token\")\n            }\n        });\n    },\n    authorization(guid) {\n      const BASEURL = \"https://directory-dev.loanpal.services/\";\n      const ENDPOINT = \"Authorization\";\n      axios\n        .create({\n          baseURL: BASEURL,\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + this.TOKEN,\n          },\n        })\n        .post(ENDPOINT, { contextId: guid })\n        .then((res) => {\n          console.log(res);\n          this.authToken = res.data.token;\n          this.getOrg(res.data.token);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    getOrg(token) {\n      const BASEURL = \"https://directory-dev.loanpal.services/\";\n      const ENDPOINT = \"Organizations/external/\" + this.orgId;\n      axios\n        .create({\n          baseURL: BASEURL,\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + token,\n          },\n        })\n        .get(ENDPOINT)\n        .then((res) => {\n          const self = this;\n          self.$store.commit(\"updateOrganization\", res.data.payload);\n          this.orgGuid = res.data.payload.guid;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    createApiKey() {\n      const BASEURL = \"https://directory-dev.loanpal.services/\";\n      const ENDPOINT = \"Users/system/\";\n      const self = this;\n      axios\n        .create({\n          baseURL: BASEURL,\n          headers: {\n            \"Content-Type\": \"application/json-patch+json\",\n            Authorization: \"Bearer \" + this.TOKEN,\n          },\n        })\n        .post(ENDPOINT, {\n          name: self.$store.getters.organzation.name + ' ' + self.$store.getters.organzation.tenant.code + ' ' + this.keyName,\n          organizationId: this.orgGuid,\n          roleId: \"d6508641-2b1e-4654-8133-bc7b01d91d36\",\n          publicKey: \"\",\n        })\n        .then((res) => {\n          console.log(res);\n          this.payload = res.data.payload.apiKeys[0];\n        })\n        .catch((err) => {\n          console.log(err.status);\n        });\n    },\n    getOrgUser() {\n      const BASEURL = \"https://directory-dev.loanpal.services/\";\n      const ENDPOINT = \"Organizations/\" + this.orgGuid + \"/users\";\n      axios\n        .create({\n          baseURL: BASEURL,\n          headers: {\n            \"Content-Type\": \"application/json-patch+json\",\n            Authorization: \"Bearer \" + this.TOKEN,\n          },\n        })\n        .get(ENDPOINT)\n        .then((res) => {\n          console.log(res);\n          const self = this;\n          self.$store.commit(\"updateOrganizationUsers\", res.data.payload);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    deleteKeys(name, contextId) {\n      // const BASEURL = \"https://directory-dev.loanpal.services/\";\n      // const ENDPOINT = 'Users/contexts' + this.orgGuid\n      // if (confirm(\"Deleting \" + name + \"are you sure?\")) {\n      //   console.log(contextId);\n      // }\n      const BASEURL = \"https://directory-dev.loanpal.services/\";\n      const ENDPOINT = 'Users/contexts/' + this.orgGuid\n      axios\n        .create({\n          baseURL: BASEURL,\n          headers: {\n            \"Content-Type\": \"application/json-patch+json\",\n            Authorization: \"Bearer \" + this.TOKEN,\n          },\n        })\n        .delete(ENDPOINT)\n        .then((res) => {\n          if (confirm(\"Deleting \" + name + \"are you sure?\")) {\n            console.log(res)\n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n  },\n};\n</script>\n\n<style>\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}